!function(t){if(!(t.browser.msie&&t.browser.version<=8)){var e=function(e){if("undefined"==typeof window.galleries)return null;var a=null;return t.each(window.galleries,function(t,n){n.ID==e&&(a=n)}),a},a=function(t,e,a){var n=a;return n="undefined"!=typeof t.display_settings[e]&&""!=t.display_settings[e]?t.display_settings[e]:a,1==n&&(n=!0),0==n&&(n=!1),"1"==n&&(n=!0),"0"==n&&(n=!1),"false"==n&&(n=!1),"true"==n&&(n=!0),n},n=["EM","STRONG","B","DEL","I","INS","MARK","SMALL","STRIKE","SUB","SUP","TT","U"],i=function(t){var e=document.createElement("div");return e.innerHTML=t,r(e),e.innerHTML},r=function(t){for(var e=Array.prototype.slice.apply(t.getElementsByTagName("*"),[0]),a=0;a<e.length;a++)n.indexOf(e[a].nodeName)==-1&&o(e[a])},o=function(t){for(var e=t,a=t.childNodes.length-1;a>=0;a--){var n=t.removeChild(t.childNodes[a]);t.parentNode.insertBefore(n,e),e=n}t.parentNode.removeChild(t)};nggc_share_icons={strip_html:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},create:function(e,a){var n=a.data("image-id"),i=a.data("nplmodal-gallery-id"),r=encodeURIComponent(this.get_share_url(i,n)),o=encodeURIComponent(window.location.toString()),s=this.strip_html(a.data("title")),d=this.strip_html(a.data("description")),g=t("<i/>",{"data-href":"https://twitter.com/share?url="+this.get_share_url(i,n,"full"),class:"ngg-caption-icon fa fa-twitter-square"}),c=t("<i/>",{"data-href":"https://plus.google.com/share?url="+r,class:"ngg-caption-icon fa fa-google-plus-square"}),l="&p[url]="+encodeURIComponent(this.get_share_url(i,n,"full"));s.length>0&&(l+="&p[title]="+s.trim()),d.length>0&&(l+="&p[summary]="+d.trim()),l+="&p[images][0]="+encodeURIComponent(a.attr("href")).trim();var p=t("<i/>",{"data-href":"https://www.facebook.com/sharer/sharer.php?s=100"+l,class:"ngg-caption-icon fa fa-facebook-square"}),f=encodeURIComponent(this.get_share_url(i,n,"full"));f+="&url="+o,f+="&media="+a.attr("href"),f+="&description="+d;var h=t("<i/>",{"data-href":"http://pinterest.com/pin/create/button/?s=100"+f,class:"ngg-caption-icon fa fa-pinterest-square"}),u=[g,c,p,h];t(u).each(function(){t(this).on("click",function(e){e.preventDefault();var a=window.open(t(this).data("href"),"_blank");return a.focus(),!1})}),e.html("").append(u)},get_share_url:function(e,a,n){"undefined"==typeof n&&(n="thumb");var i=t.nplModal("get_setting","share_url").replace("{gallery_id}",e).replace("{image_id}",a).replace("{named_size}",n),r=t("<a/>").attr("href",t.nplModal("get_setting","wp_site_url"))[0],o=t("<a/>").attr("href",window.location.toString())[0],s=t("<a/>").attr("href",i)[0];return o.pathname.indexOf(r.pathname)>=0&&(o.pathname=o.pathname.substr(r.pathname.length)),o.pathname.indexOf(s.pathname)>=0&&(o.pathname=o.pathname.substr(o.pathname.length)),s.search=o.search,s.search.length>0&&(s.search+="&"),s.search+="uri="+o.pathname,s.href}},t.fn.nggcaption=function(){this.each(function(){var n=t(this);if(n.data("ngg-captions-processed"))return!0;var r=e(n.data("ngg-captions-id")),o=a(r,"captions_animation","slideup"),d=n.find("img").first();if(!d.attr("src")&&!d.attr("srcset"))return!0;n.data("ngg-captions-processed",1);var g=t('<figure class="ngg-figure"></figure>'),c=t('<figcaption class="ngg-figcaption"></figcaption>'),l=t("<h6>"+i(n.data("title"))+"</h6>");a(r,"captions_display_title",!0)||g.addClass("nggc_no_title");var p=t("<div/>").addClass("nggc-body"),f=t('<p data-ngg-original-description="'+i(n.data("description"))+'"></p>');a(r,"captions_display_title",!0)||f.html(i(n.data("description"))),p.append(f),a(r,"captions_display_description",!0)||g.addClass("nggc_no_description");var h=n.attr("class"),u=n.attr("style"),m=d.attr("style");if(n.removeAttr("title"),n.data("ngg-captions-nostylecopy")||(n.removeAttr("class"),n.removeAttr("style")),g.addClass("ngg-figure-"+o),c.addClass("ngg-figcaption-"+o),t.inArray(r.source,["albums","random","random_images"])==-1&&"undefined"!=typeof window.nplModalSettings&&"1"==nplModalSettings.enable_routing&&"1"==nplModalSettings.enable_sharing&&a(r,"captions_display_sharing",!0)){var _=r.slug;if(!_||_.indexOf("widget-ngg-images")==-1){var v=t('<div class="nggc-icon-wrapper"/>');nggc_share_icons.create(v,n),t(document).trigger("ngg-caption-add-icons",{el:v,image_id:n.data("image-id"),gallery_id:n.data("nplmodal-gallery-id")}),c.append(v)}}else g.addClass("nggc_no_sharing");a(r,"captions_display_title",!0)&&c.append(l),a(r,"captions_display_description",!0)&&c.append(p),t.browser.msie&&(9==t.browser.version&&t(g).addClass("nggc-ie9"),10==t.browser.version&&t(g).addClass("nggc-ie10")),n.data("ngg-captions-nostylecopy")||(g.attr("style",m),g.attr("style",u)),d.removeAttr("style"),n.data("ngg-captions-nostylecopy")||g.css({"max-width":parseInt(d[0].getAttribute("width"))+"px"}),$newfigure=d.wrap(g),d.after(c),n.data("ngg-captions-nostylecopy")||$newfigure.addClass(h),$newfigure.imagesLoaded().done(function(){s(l),s(p)}),$newfigure.parent("p").before($newfigure)}),t(document).trigger("ngg-captions-added")};var s=function(n){"undefined"==typeof n&&(n=t("figcaption.ngg-figcaption h6, figcaption.ngg-figcaption .nggc-body")),t("div.nextgen_pro_thumbnail_grid a").each(function(){var e=t(this),a=e.find("img");a.hasClass("thickbox")&&(a.removeClass("thickbox"),e.addClass("thickbox"))}),n.each(function(){var n=t(this),r=e(n.parents("a").first().data("ngg-captions-id")),o=a(r,"captions_animation","slideup");n.dotdotdot({callback:function(t,e){if("H6"==n.prop("tagName"))if(t&&"titlebar"!=o)t&&"titlebar"!=o&&n.next("div").find("p").text("");else{var a=n.next("div").find("p");a.html(i(a.data("ngg-original-description")))}t&&!n.hasClass("nggc-dotdotdot")&&n.addClass("nggc-dotdotdot"),!t&&n.hasClass("nggc-dotdotdot")&&n.removeClass("nggc-dotdotdot")}})})},d=function(e){e=e||!1,t("a").each(function(){var a=t(this);a.data("ngg-captions-enabled")&&!a.data("ngg-captions-processed")&&(e?t(window).on("load",function(){a.nggcaption()}):a.nggcaption())})};d(!0),t(window).on("refreshed",function(){d(),s()}),t(window).on("resize fullscreenchange mozfullscreenchange webkitfullscreenchange orientationchange",function(){t("figcaption.ngg-figcaption h6, figcaption.ngg-figcaption .nggc-body").each(function(){t(this).trigger("update.dot")})})}}(jQuery);